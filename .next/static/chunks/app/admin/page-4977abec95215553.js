(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{7399:(e,t,n)=>{Promise.resolve().then(n.bind(n,9557))},9557:(e,t,n)=>{"use strict";let r;n.r(t),n.d(t,{default:()=>m});var i=n(5155),o=n(2115);let l={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},a=new Uint8Array(16),s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));let d=function(e,t,n){if(l.randomUUID&&!t&&!e)return l.randomUUID();let i=(e=e||{}).random??e.rng?.()??function(){if(!r){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r=crypto.getRandomValues.bind(crypto)}return r(a)}();if(i.length<16)throw Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){if((n=n||0)<0||n+16>t.length)throw RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=i[e];return t}return function(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}(i)};var c=n(5322),u=n.n(c);function p(e){let{id:t,removeComponent:n}=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{placeholder:"Инг"}),(0,i.jsx)("br",{}),(0,i.jsx)("input",{placeholder:"кол"}),(0,i.jsx)("select",{children:(0,i.jsx)("option",{children:"Без группы"})}),(0,i.jsx)("button",{onClick:()=>n(t),type:"button",children:"Удалить"})]})}function h(e){let{id:t,removeComponent:n,handleImageUpload:r,image:o}=e;return(0,i.jsxs)("div",{children:[o&&(0,i.jsx)("img",{src:o,alt:"Шаг приготовления",style:{width:"100px",height:"100px"}}),(0,i.jsx)("textarea",{placeholder:"Шаг приготовления"}),(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let n=e.target.files[0];r(t,"step",URL.createObjectURL(n))}}}),(0,i.jsx)("button",{onClick:()=>n(t),type:"button",children:"Удалить"})]})}function m(){let[e,t]=(0,o.useState)(""),[n,r]=(0,o.useState)(1),[l,a]=(0,o.useState)(""),[s,c]=(0,o.useState)(null),[m,x]=(0,o.useState)([{id:d()}]),[f,j]=(0,o.useState)([{id:d(),image:null}]),g=e=>{x(m.filter(t=>t.id!==e))},y=e=>{j(f.filter(t=>t.id!==e))},b=(e,t,n)=>{"step"===t&&j(f.map(t=>t.id===e?{...t,image:n}:t))},v=async t=>{t.preventDefault();let r={title:e,Portion:Number(n),description:l,ingredients:m,steps:f};try{let e=await fetch("/api/data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok){let t=await e.text();throw Error("Network response was not ok: ".concat(t))}let t=await e.json();c(t);let n=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download="recipe.json",o.click(),URL.revokeObjectURL(i)}catch(e){console.error("Ошибка при отправке данных:",e),c({message:"Ошибка при отправке данных: ".concat(e.message)})}};return(0,i.jsxs)("div",{className:u().div,children:[(0,i.jsxs)("form",{className:u().form,onSubmit:v,children:[(0,i.jsx)("h1",{children:"Заголовок"}),(0,i.jsx)("input",{type:"text",value:e,title:"Заголовок",onChange:e=>t(e.target.value)}),(0,i.jsx)("h2",{children:"Описание рецепта"}),(0,i.jsx)("textarea",{type:"text",title:"Подзаголовок",value:l,onChange:e=>a(e.target.value),placeholder:"Введите краткое описание рецепта:",required:!0}),(0,i.jsx)("h2",{children:"Кол порций"}),(0,i.jsx)("input",{type:"number",value:n,placeholder:"кол. порций",onChange:e=>r(e.target.value)}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:"Ингредиенты:"}),(0,i.jsx)("ol",{children:m.map((e,t)=>(0,i.jsx)("li",{children:(0,i.jsx)(p,{id:e.id,removeComponent:g},e.id)},t))}),(0,i.jsx)("button",{onClick:()=>{x([...m,{id:d()}])},type:"button",children:"Добавить ингредиент"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:"Шаги приготовления:"}),(0,i.jsx)("ol",{children:f.map((e,t)=>(0,i.jsx)("li",{children:(0,i.jsx)(h,{id:e.id,removeComponent:y,handleImageUpload:b,image:e.image},e.id)},t))}),(0,i.jsx)("button",{onClick:()=>{j([...f,{id:d(),image:null}])},type:"button",children:"Добавить шаг"})]}),(0,i.jsx)("button",{type:"submit",children:"Submit"})]}),s&&(0,i.jsxs)("div",{children:["Ответ: ",JSON.stringify(s)]})]})}},5322:e=>{e.exports={form:"page_form__0FWwx"}}},e=>{var t=t=>e(e.s=t);e.O(0,[321,441,517,358],()=>t(7399)),_N_E=e.O()}]);